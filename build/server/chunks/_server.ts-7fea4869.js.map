{"version":3,"file":"_server.ts-7fea4869.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/page/_server.ts.js"],"sourcesContent":["import { d as db } from \"../../../../chunks/database.js\";\nimport { j as json } from \"../../../../chunks/index.js\";\nconst GET = async (event) => {\n  const pageid = parseInt(event.url.searchParams.get(\"pageid\"));\n  const itemid = parseInt(event.url.searchParams.get(\"itemid\"));\n  console.log(itemid);\n  let page = await db.page.findUnique({\n    where: {\n      id: pageid\n    }\n  });\n  let next = await db.page.findMany({\n    take: 1,\n    skip: 1,\n    cursor: {\n      id: pageid\n    },\n    where: {\n      itemid\n    }\n  });\n  let prev = await db.page.findMany({\n    take: -1,\n    skip: 1,\n    cursor: {\n      id: pageid\n    },\n    where: {\n      itemid\n    }\n  });\n  let item = await db.item.findUnique({\n    where: { id: itemid }\n  });\n  event.setHeaders({\n    \"Cache-Control\": \"public, max-age=0, s-maxage=60\"\n  });\n  const retVal = {\n    prev: prev ? prev.pop() : {},\n    page,\n    next: next ? next.pop() : {},\n    item\n  };\n  return json(retVal);\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;AAEK,MAAC,GAAG,GAAG,OAAO,KAAK,KAAK;AAC7B,EAAE,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChE,EAAE,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChE,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACtB,EAAE,IAAI,IAAI,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;AACtC,IAAI,KAAK,EAAE;AACX,MAAM,EAAE,EAAE,MAAM;AAChB,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,IAAI,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;AACpC,IAAI,IAAI,EAAE,CAAC;AACX,IAAI,IAAI,EAAE,CAAC;AACX,IAAI,MAAM,EAAE;AACZ,MAAM,EAAE,EAAE,MAAM;AAChB,KAAK;AACL,IAAI,KAAK,EAAE;AACX,MAAM,MAAM;AACZ,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,IAAI,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;AACpC,IAAI,IAAI,EAAE,CAAC,CAAC;AACZ,IAAI,IAAI,EAAE,CAAC;AACX,IAAI,MAAM,EAAE;AACZ,MAAM,EAAE,EAAE,MAAM;AAChB,KAAK;AACL,IAAI,KAAK,EAAE;AACX,MAAM,MAAM;AACZ,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,IAAI,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;AACtC,IAAI,KAAK,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE;AACzB,GAAG,CAAC,CAAC;AACL,EAAE,KAAK,CAAC,UAAU,CAAC;AACnB,IAAI,eAAe,EAAE,gCAAgC;AACrD,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,MAAM,GAAG;AACjB,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE;AAChC,IAAI,IAAI;AACR,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE;AAChC,IAAI,IAAI;AACR,GAAG,CAAC;AACJ,EAAE,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;AACtB;;;;"}